description: |
  Command to initialize the Harbormaster orb by providing your Harbormaster API token.

  This token is obtained from your online account under User Preferences on http://platform.harbormaster.com.

  Assign this token as an environment variable on CircleCI.

  See https://circleci.com/docs/2.0/env-vars/
  for more details on assigning an environment variable.

parameters:
  
  api-token:
    description: "Your Harbormaster API token"
    type: env_var_name
    default: HARBORMASTER_API_TOKEN
    
  project-as-code-yaml-file:
    description: "A Project-as-Code YAML file to apply during DevOps project generation"
    type: string
        
steps:
  - run:
      name: Harbormaster initialization
      environment:
        USER_HARBORMASTER_API_TOKEN: <<parameters.api-token>>
        HARBORMASTER_PROJECT_AS_CODE_YAML_FILE: <<parameters.project-as-code-yaml-file>>
      command: <<include(scripts/generate.sh)>>
