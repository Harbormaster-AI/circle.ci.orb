description: |
  Command to initialize the Harbormaster orb by providing your Harbormaster API token.

  This token is obtained from your online account under User Preferences on http://platform.harbormaster.com.

  Next, create an environmental variable named HARBORMASTER_API_TOKEN on CircleCI and assign it your Harbormaster
  API token.

  See https://circleci.com/docs/2.0/env-vars/ or more details on assigning an environment variable.

parameters:

  api-token:
    description: "Your Harbormaster API token"
    type: env_var_name
    default: HARBORMASTER_API_TOKEN

  project-as-code-yaml-file:
    description: "A Project-as-Code YAML file to apply during DevOps project generation"
    type: string

steps:
  - run:
      name: Harbormaster project generation
      environment:
        HARBORMASTER_PROJECT_AS_CODE_YAML_FILE: <<parameters.project-as-code-yaml-file>>
      command: <<include(scripts/generate.sh)>>
